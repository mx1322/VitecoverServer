server {
  listen 80;

  # GraphQL API
  location /graphql/ {
    proxy_pass http://api:8000/graphql/;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
  }

  # Media files
  location /media/ {
    proxy_pass http://api:8000/media/;
    proxy_set_header Host $host;
  }

  # Dashboard
  location /dashboard/ {
    proxy_pass http://dashboard:80/;
    proxy_set_header Host $host;
  }

  # Default root
  location / {
    return 200 'Saleor backend is running.\n';
    add_header Content-Type text/plain;
  }
}
